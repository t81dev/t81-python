{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/t81dev/t81-python/schemas/ecosystem.schema.json",
  "title": "t81-python ecosystem metadata",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "name",
    "repository",
    "snapshot_date",
    "status",
    "maturity",
    "purpose",
    "primary_language",
    "interfaces",
    "artifact_formats",
    "dependencies",
    "ecosystem_links",
    "quality_gates"
  ],
  "properties": {
    "name": {"type": "string", "minLength": 1},
    "repository": {"type": "string", "pattern": "^https://github\\.com/"},
    "snapshot_date": {"type": "string", "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"},
    "status": {"type": "string", "minLength": 1},
    "maturity": {"type": "string", "minLength": 1},
    "purpose": {"type": "string", "minLength": 1},
    "primary_language": {"type": "string", "minLength": 1},
    "interfaces": {
      "type": "object",
      "additionalProperties": false,
      "required": ["python_package", "cli"],
      "properties": {
        "python_package": {"type": "string", "minLength": 1},
        "cli": {"type": "string", "minLength": 1}
      }
    },
    "artifact_formats": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "version", "manifest", "payload_extension", "spec"],
        "properties": {
          "name": {"type": "string", "minLength": 1},
          "version": {"type": "string", "minLength": 1},
          "manifest": {"type": "string", "minLength": 1},
          "payload_extension": {"type": "string", "pattern": "^\\."},
          "spec": {"type": "string", "minLength": 1}
        }
      }
    },
    "dependencies": {
      "type": "object",
      "additionalProperties": false,
      "required": ["required", "optional"],
      "properties": {
        "required": {
          "type": "array",
          "items": {"type": "string"}
        },
        "optional": {
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {"type": "string"}
          }
        }
      }
    },
    "ecosystem_links": {
      "type": "object",
      "additionalProperties": false,
      "required": ["docs_hub", "core_library", "examples"],
      "properties": {
        "docs_hub": {"type": "string", "pattern": "^https://github\\.com/"},
        "core_library": {"type": "string", "pattern": "^https://github\\.com/"},
        "examples": {"type": "string", "pattern": "^https://github\\.com/"}
      }
    },
    "quality_gates": {
      "type": "array",
      "minItems": 1,
      "items": {"type": "string", "minLength": 1}
    }
  }
}
